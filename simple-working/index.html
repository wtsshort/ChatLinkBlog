<!DOCTYPE html>
<html lang="ar" dir="rtl">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>WTSSHORT - Ù…ÙˆÙ„Ø¯ Ø±ÙˆØ§Ø¨Ø· ÙˆØ§ØªØ³Ø§Ø¨</title>
    <meta name="description" content="Ø£Ø¯Ø§Ø© Ù…Ø¬Ø§Ù†ÙŠØ© Ù„Ø¥Ù†Ø´Ø§Ø¡ Ø±ÙˆØ§Ø¨Ø· ÙˆØ§ØªØ³Ø§Ø¨ Ù…Ø¹ Ø±Ø³Ø§Ø¦Ù„ Ø¬Ø§Ù‡Ø²Ø©" />
    <style>
      * { margin: 0; padding: 0; box-sizing: border-box; }
      body { font-family: 'Arial', sans-serif; background: #f8fafc; direction: rtl; color: #374151; }
      .container { max-width: 1000px; margin: 0 auto; padding: 20px; }
      .header { text-align: center; margin-bottom: 40px; }
      .logo { color: #25D366; font-size: 2.5rem; font-weight: bold; margin-bottom: 10px; }
      .subtitle { color: #64748b; font-size: 1.1rem; line-height: 1.6; }
      .stats { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin: 30px 0; }
      .stat-card { background: white; padding: 25px; border-radius: 12px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); text-align: center; }
      .stat-number { font-size: 2rem; font-weight: bold; color: #25D366; display: block; margin-bottom: 5px; }
      .stat-label { color: #64748b; font-size: 0.9rem; }
      .generator { background: white; padding: 30px; border-radius: 12px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); margin: 20px 0; }
      .section-title { color: #374151; margin-bottom: 25px; text-align: center; font-size: 1.3rem; }
      .form-group { margin-bottom: 20px; }
      .label { display: block; margin-bottom: 8px; color: #374151; font-weight: 500; }
      .input, .textarea { width: 100%; padding: 12px; border: 2px solid #e5e7eb; border-radius: 8px; font-size: 1rem; }
      .input:focus, .textarea:focus { border-color: #25D366; outline: none; }
      .textarea { resize: vertical; font-family: inherit; }
      .button { background: #25D366; color: white; padding: 12px 30px; border: none; border-radius: 8px; font-size: 1rem; cursor: pointer; font-weight: 500; width: 100%; }
      .button:hover { background: #1da851; }
      .result { margin-top: 20px; padding: 20px; background: #f0fdf4; border-radius: 8px; border-right: 4px solid #25D366; display: none; }
      .link-result { color: #25D366; word-break: break-all; font-weight: 500; font-size: 1.1rem; margin: 10px 0; }
      .tests { margin-top: 30px; text-align: center; }
      .test-links { display: flex; flex-wrap: wrap; justify-content: center; gap: 15px; margin-top: 20px; }
      .test-link { padding: 10px 20px; background: #25D366; color: white; text-decoration: none; border-radius: 6px; font-size: 0.9rem; }
      .test-link:hover { background: #1da851; }
      .footer { text-align: center; margin-top: 50px; padding-top: 30px; border-top: 1px solid #e5e7eb; color: #64748b; }
      
      @media (max-width: 768px) {
        .container { padding: 15px; }
        .logo { font-size: 2rem; }
        .generator { padding: 20px; }
        .test-links { flex-direction: column; align-items: center; }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <header class="header">
        <div class="logo">ğŸ”— WTSSHORT</div>
        <div class="subtitle">Ø£Ø¯Ø§Ø© Ù…Ø¬Ø§Ù†ÙŠØ© Ù„Ø¥Ù†Ø´Ø§Ø¡ Ø±ÙˆØ§Ø¨Ø· ÙˆØ§ØªØ³Ø§Ø¨ Ù…Ø¹ Ø±Ø³Ø§Ø¦Ù„ Ø¬Ø§Ù‡Ø²Ø©<br>Ø§Ø¨Ø¯Ø£ Ù…Ø­Ø§Ø¯Ø«Ø§Øª ÙˆØ§ØªØ³Ø§Ø¨ ÙÙˆØ±ÙŠØ© Ù…Ø¹ Ø¹Ù…Ù„Ø§Ø¦Ùƒ</div>
      </header>

      <div class="stats">
        <div class="stat-card">
          <span class="stat-number" id="totalLinks">3</span>
          <div class="stat-label">Ø§Ù„Ø±ÙˆØ§Ø¨Ø· Ø§Ù„Ù…ÙÙ†Ø´Ø£Ø©</div>
        </div>
        <div class="stat-card">
          <span class="stat-number" id="totalClicks">1,450</span>
          <div class="stat-label">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù†Ù‚Ø±Ø§Øª</div>
        </div>
        <div class="stat-card">
          <span class="stat-number" id="totalPosts">2</span>
          <div class="stat-label">Ù…Ù‚Ø§Ù„Ø§Øª Ø§Ù„Ù…Ø¯ÙˆÙ†Ø©</div>
        </div>
        <div class="stat-card">
          <span class="stat-number" id="totalViews">850</span>
          <div class="stat-label">Ù…Ø´Ø§Ù‡Ø¯Ø§Øª Ø§Ù„Ù…Ù‚Ø§Ù„Ø§Øª</div>
        </div>
      </div>

      <div class="generator">
        <h2 class="section-title">ğŸ“± Ø¥Ù†Ø´Ø§Ø¡ Ø±Ø§Ø¨Ø· ÙˆØ§ØªØ³Ø§Ø¨ Ø¬Ø¯ÙŠØ¯</h2>
        <form id="linkForm">
          <div class="form-group">
            <label class="label">Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ Ù…Ø¹ Ø±Ù…Ø² Ø§Ù„Ø¯ÙˆÙ„Ø©</label>
            <input type="tel" class="input" placeholder="+966501234567" id="phoneNumber" required>
            <small style="color: #64748b;">Ù…Ø«Ø§Ù„: +966501234567 Ø£Ùˆ +971501234567</small>
          </div>
          <div class="form-group">
            <label class="label">Ù†Øµ Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ù…ÙØ¹Ø¯Ø© Ù…Ø³Ø¨Ù‚Ø§Ù‹</label>
            <textarea class="textarea" rows="4" placeholder="Ù…Ø±Ø­Ø¨Ø§Ù‹! ÙƒÙŠÙ ÙŠÙ…ÙƒÙ†Ù†ÙŠ Ù…Ø³Ø§Ø¹Ø¯ØªÙƒØŸ" id="message" required></textarea>
            <small style="color: #64748b;">Ù‡Ø°Ù‡ Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø³ØªØ¸Ù‡Ø± Ø¬Ø§Ù‡Ø²Ø© Ù„Ù„Ø¥Ø±Ø³Ø§Ù„ Ø¹Ù†Ø¯ ÙØªØ­ ÙˆØ§ØªØ³Ø§Ø¨</small>
          </div>
          <div class="form-group">
            <label class="label">Ø±Ø§Ø¨Ø· Ù…Ø®ØµØµ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)</label>
            <input type="text" class="input" placeholder="my-store" id="customSlug">
            <small style="color: #64748b;">Ø³ÙŠØµØ¨Ø­ Ø§Ù„Ø±Ø§Ø¨Ø·: yoursite.com/s/my-store</small>
          </div>
          <button type="submit" class="button">ğŸš€ Ø¥Ù†Ø´Ø§Ø¡ Ø±Ø§Ø¨Ø· ÙˆØ§ØªØ³Ø§Ø¨</button>
        </form>
        
        <div id="result" class="result">
          <strong>âœ… ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø±Ø§Ø¨Ø· Ø¨Ù†Ø¬Ø§Ø­!</strong><br>
          <div class="link-result" id="generatedLink"></div>
          <p style="margin-top: 10px; color: #16a34a; text-align: center;">
            ğŸ‰ ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„Ø¢Ù† Ù…Ø´Ø§Ø±ÙƒØ© Ù‡Ø°Ø§ Ø§Ù„Ø±Ø§Ø¨Ø· Ù…Ø¹ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ Ù„Ø¨Ø¯Ø¡ Ù…Ø­Ø§Ø¯Ø«Ø© ÙˆØ§ØªØ³Ø§Ø¨ Ù…Ø¨Ø§Ø´Ø±Ø©
          </p>
        </div>
      </div>

      <div class="tests">
        <h3 class="section-title">ğŸ§ª Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ù…ÙŠØ²Ø§Øª</h3>
        <div class="test-links">
          <a href="/api/test" target="_blank" class="test-link">ğŸ”§ Ø§Ø®ØªØ¨Ø§Ø± API</a>
          <a href="/s/hello" target="_blank" class="test-link">ğŸ‘‹ Ø±Ø§Ø¨Ø· ØªØ±Ø­ÙŠØ¨</a>
          <a href="/s/store" target="_blank" class="test-link">ğŸª Ø±Ø§Ø¨Ø· Ù…ØªØ¬Ø±</a>
          <a href="https://wa.me/966501234567?text=%D9%85%D8%B1%D8%AD%D8%A8%D8%A7%D9%8B" target="_blank" class="test-link">ğŸ“± ÙˆØ§ØªØ³Ø§Ø¨ Ù…Ø¨Ø§Ø´Ø±</a>
        </div>
        <p style="margin-top: 15px; color: #64748b; text-align: center; font-size: 0.9rem;">
          Ø¥Ø°Ø§ Ø¹Ù…Ù„Øª Ø§Ù„Ø±ÙˆØ§Ø¨Ø· Ø£Ø¹Ù„Ø§Ù‡ØŒ ÙØ§Ù„Ù…Ø´Ø±ÙˆØ¹ ÙŠØ¹Ù…Ù„ Ø¨Ù†Ø¬Ø§Ø­! âœ…
        </p>
      </div>

      <footer class="footer">
        <p><strong>WTSSHORT</strong> - Ø£Ø¯Ø§Ø© Ù…Ø¬Ø§Ù†ÙŠØ© Ù„Ø¥Ù†Ø´Ø§Ø¡ Ø±ÙˆØ§Ø¨Ø· ÙˆØ§ØªØ³Ø§Ø¨</p>
        <p>ØµÙÙ†Ø¹ Ø¨Ù€ â¤ï¸ Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ø§Ù„Ø¹Ø±Ø¨ | Â© 2024</p>
      </footer>
    </div>

    <script>
      // Form handling
      document.getElementById('linkForm').addEventListener('submit', function(e) {
        e.preventDefault();
        
        const phoneNumber = document.getElementById('phoneNumber').value.trim();
        const message = document.getElementById('message').value.trim();
        const customSlug = document.getElementById('customSlug').value.trim();
        
        if (!phoneNumber || !message) {
          alert('âš ï¸ ÙŠØ±Ø¬Ù‰ Ù…Ù„Ø¡ Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ ÙˆØ§Ù„Ø±Ø³Ø§Ù„Ø©');
          return;
        }

        // Validate phone number
        if (!phoneNumber.startsWith('+')) {
          alert('âš ï¸ ÙŠØ±Ø¬Ù‰ Ø¥Ø¶Ø§ÙØ© Ø±Ù…Ø² Ø§Ù„Ø¯ÙˆÙ„Ø© Ù…Ø¹ Ø¹Ù„Ø§Ù…Ø© + (Ù…Ø«Ø§Ù„: +966)');
          return;
        }

        try {
          // Generate WhatsApp link
          const cleanNumber = phoneNumber.replace(/[^+\d]/g, '').replace('+', '');
          const encodedMessage = encodeURIComponent(message);
          const whatsappLink = `https://wa.me/${cleanNumber}?text=${encodedMessage}`;
          
          // Show result
          document.getElementById('generatedLink').textContent = whatsappLink;
          document.getElementById('result').style.display = 'block';
          
          // Scroll to result smoothly
          setTimeout(() => {
            document.getElementById('result').scrollIntoView({ 
              behavior: 'smooth',
              block: 'center'
            });
          }, 100);
          
          // Copy to clipboard
          navigator.clipboard.writeText(whatsappLink).then(() => {
            console.log('Link copied to clipboard');
          }).catch(err => {
            console.log('Could not copy link');
          });

        } catch (error) {
          alert('âŒ Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø±Ø§Ø¨Ø·ØŒ ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰');
          console.error('Error generating link:', error);
        }
      });

      // Test API connection
      async function testAPI() {
        try {
          const response = await fetch('/api/test');
          if (response.ok) {
            const data = await response.json();
            console.log('âœ… API Connected:', data);
          } else {
            console.log('âŒ API Error:', response.status);
          }
        } catch (error) {
          console.log('âŒ API Connection failed:', error);
        }
      }

      // Run tests on page load
      window.addEventListener('load', () => {
        testAPI();
        console.log('ğŸš€ WTSSHORT loaded successfully');
      });
    </script>
  </body>
</html>